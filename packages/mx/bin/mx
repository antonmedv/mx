#!/usr/bin/env node
const fs = require('fs')
const parser = require('../src/parser')
const drawGraph = require('../src/graph')

const file = __dirname + '/../test.mx'
const code = fs.readFileSync(file, {encoding: 'utf8'})

const lexer = parser.Parser.prototype.lexer;
lexer.setInput(code)
for(;;) {
  let token = lexer.lex()
  console.log(parser.Parser.prototype.terminals_[token] || token);
  if (token === 1) break
}

const ast = parser.parse(file, code)
//console.log(JSON.stringify(ast, null, 4))
console.log(drawGraph(ast))
